<html>
<head>
<title>贪吃蛇</title>
<style>
	canvas{
		background-color:rgba(0,250,0,.2);
		margin:50px auto 0;
		display:block;
		border:2px solid black;
	}
</style>
</head>
<body>
	<div>傻东西，老姐，yzf</div>
	<canvas width="450" height="450" id="canvas"></canvas>
	<script>
		var canvas=document.getElementById("canvas");
		var ctx=canvas.getContext("2d");
		var snakeCount= 6;
		ctx.strokeStyle="#f7fffa";
		var snake = [];
			/*
			snake.push("我最帅");
			snake.push("啦啦啦");
			snake.push("你才丑");
			snake.push("大傻逼");
			alert(snake[0]);
			alert(snake[1]);
			alert(snake[2]);
			alert(snake[3]);
			*/
		//初始化蛇的移动方向
		var toGo=3;
		var foodX = 150;
		var foodY = 150;
		function drawRect(){
			//画网格
			for(var i=1;i<30;i++){
				ctx.beginPath();
				ctx.moveTo(15*i,0);
				ctx.lineTo(15*i,450);
				ctx.closePath();
				ctx.stroke();
				ctx.beginPath();
				ctx.moveTo(0,15*i);
				ctx.lineTo(450,15*i);
				ctx.closePath();
				ctx.stroke();
			}
			//画蛇
			for(var i=0;i<snakeCount;i++){
				ctx.fillStyle="black";
				if(i==snakeCount-1){
					ctx.fillStyle ="red";
				}
				ctx.fillRect(snake[i].x,snake[i].y,15,15);
			}
			//设置食物的颜色
			ctx.fillStyle="#946ded";
			//
			ctx.fillRect(foodX,foodY,15,15);
			ctx.fill();
		}
		function start(){
			for(var i=0;i<snakeCount;i++){
				snake[i] ={x:15*i,y:0};
			}
			drawRect();
			addFood();
		}
		function addFood(){
			foodX = Math.floor(Math.random()*30)*15;
			foodY = Math.floor(Math.random()*30)*15;
			for(var i=0;i<snakeCount-1;i++){
				if(foodX==snake[i].x&&foodY==snake[i].y){
					addFood();
				}
			}
		}
		//蛇移动的方向
		function move(){
			
			switch(toGo){
				case 1:
				snake.push({x:snake[snakeCount-1].x-15,y:snake[snakeCount-1].y});
				break;
				case 2:
				snake.push({x:snake[snakeCount-1].x,y:snake[snakeCount-1].y-15});
				break;
				case 3:
			
				snake.push({x:snake[snakeCount-1].x+15,y:snake[snakeCount-1].y});
				break;
				case 4:
				snake.push({x:snake[snakeCount-1].x,y:snake[snakeCount-1].y+15});
				break;
			}
			snake.shift();//删除数组的第一个元素
			ctx.clearRect(0,0,450,450);
			isEat();
			drawRect();
		}
		//吃到食物
		function isEat(){
			if(snake[snakeCount-1].x==foodX&&snake[snakeCount-1].y==foodY){
				addFood();
				snakeCount++;
				snake.unshift({x:-15,y:-15});
			}
		}
		//键盘按下
		function keyDown(e){
			
			switch (e.keyCode)
			{
			case 37:toGo=1;break;
			case 38:toGo=2;break;
			case 39:toGo=3;break;
			case 40:toGo=4;break;
			
			}
		}
		window.onload=function(){
			setInterval(move,600);
			document.onkeydown = function(e){
				keyDown(e);
			}
			start();
			drawRect();
			move();
		}
	</script>
</body>
</html>